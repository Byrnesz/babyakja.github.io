---
layout: post # needs to be post
title: Predicting West Nile Outbreaks in Chicago
featured-img: lance-anderson-636845
categories: [Project, Machine Learning]
---

The city of Chicago is facing a crucial problem to reduce total cases of West Nile Virus as well as vector mosquitoes.  Controlling the mosquito population is the first hurdle to preventing West Nile Virus and mosquito borne diseases. Mosquito control is challenging due to constantly moving targets, while maximizing values of wisely spent public funds.

Our objective was to predict when are where the worst outbreak could occur and what indicators could be used to gauge when action needed to be taken. If done successfully, a comprehensive spray plan can be developed to prevent West Nile outbreaks.

### Dataset

Our data contained collection data per trap for 2007, 2009, 2011, and 2013. Each observation told us how many particular vecotr mosquitoes were collected on a particular day and location and whether it tested positive for West Nile. This type of data presented numerous challenges since variations across years, location, and  created a multi-tiered problem to address.

The chart below demostrates the difficulty in grouping postive cases of West Nile into discernable groups. While positive cases can be grouped by highest frequency traps, this quickly falls apart based on time and species and we can no longer cluster postive detections together.

![Postive cases](https://raw.githubusercontent.com/babyakja/babyakja.github.io/master/assets/img/posts/Dashboard%202.png)

To make the problem more approachable, we focused on exploring features along certain areas.

#### Dependency on seasonal variation

Seasonal flucuations in mosquito population was very apparent within the dataset as we observed patterns across each year. This took us  into two possibilities in either building a weight system to adjust for seasonal changes or to rely on calendar indicators such as month and day of the year. In the end, using the calendar method provided enough detail within the model.

#### Species type

Species type contributed strongly to predictions based on the population size of each type, with some species being more likely to be carriers of the virus. Fluctation in time of year 

|Species|Rate of WNV|
|:---:|:---:|
|CULEX ERRATICUS |	0.000000|
|CULEX PIPIENS |	0.088922|
|CULEX PIPIENS/RESTUANS |	0.055135|
|CULEX RESTUANS |	0.017883|
|CULEX SALINARIUS |	0.000000|
|CULEX TARSALIS |	0.000000|
|CULEX TERRITANS |	0.000000|


#### Rolling Weather data

Using the available weather data, it was imparitive to use the most useful set of weather data and it does not necessarly line up on a day to day basis. Mosquito population can be influenced by the running average 

#### Location of Trap

There were certain locations that collected higher concentrations of mosquitos and thus had higher postive cases of West Nile Virus detected. However, this was not consistent across years and setting up categorical features per trap did not prove to be effective. Relying on the latitude and longitude did provide a baseline for proximity but improvements need to add for a more comprehehensive spatial analysis.

![WNV Outbreaks](https://raw.githubusercontent.com/babyakja/babyakja.github.io/master/assets/img/posts/WNV%20Chicago%20Project.png)


#### Spatial Analysis of Traps Proxmity to L-Train stop

After going through the inital set of data available to us, we noticed there was too much granularity to dummy each trap, but proximity was still relevant. Lat/Long of traps provides some necessary detail but does not account for the true shape of Chicago and movement of people. To account for this, traps were grouped by their proximity to L-train stops and categorized by the line it was closest to (i.e. Blue Line, Red Line, etc).

This added a useable feature beyond coordinates that ended up contributing postivietly in it's test iterative.

![Train map](https://raw.githubusercontent.com/babyakja/babyakja.github.io/master/assets/img/posts/Train%Categories.png)


### Models

Our approach stated off by using a set of multiple different classification models and determining which would be best suited for our analysis. Since our metric was based on maximizing the ROC-AUC score, visualizing this graphically was beneficial and provided insight into model performance.

![Results](https://raw.githubusercontent.com/babyakja/babyakja.github.io/master/assets/img/posts/multiple%roc%auc.png)

__Model of Choice:__ _Logistic Regression_

- Logisitic Regression ultimately allowed us to do feature addition and have it reflected well in the data. The strength of probabilities were on a lower range than other model types but produce a better roc-auc score.

### Analyze Model

Analyzing the data came down to creating a list of probabilities per trap for our test set

### Conclusion

__0.77__ 
